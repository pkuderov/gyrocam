0. Доброе утро, уважаемая комиссия! Я представляю доклад по своей дипломной работе на тему "Ориентация монокулярной камеры с использованием точек схождения перспективы.

1. Последние десятилетия наблюдается высокий уровень интереса к автопилотируемой технике. Одна из наиболее проблемных подсистем такой техники значится система навигации, и, в частности, подсистема позиционирования. 
С целью ориентации и навигации автономного движущегося объекта в настоящее время широко используются три варианта решения: инерциальные системы, спутниковые системы и системы локального позиционирования.

Современной альтернативой дорогим системам локального позиционирования выступают системы, применяющие методы машинного (компьютерного) зрения. В качестве аппаратного обеспечения таких систем используют видеодатчики, имеющие незначительный размер, и как следствие – низкое энергопотребление и невысокую стоимость. Подобные системы на основе анализа изображений не имеют дрейфа, при этом может достигаться довольно высокая точность, сравнимая с инерциальными навигационными системами потребительского класса.

Одна из подзадач, возникающих при построении системы позиционирования с использованием алгоритмов компьютерного зрения, — определение углов наклона и поворота видеокамеры, установленной на перемещающемся объекте. В этом случае, видеокамера, позиционируя движение объекта, выполняет роль гироскопа.

В 2012 году Роберт Пише и его ученик Вилле Хуттунен предложили и апробировали в помещении метод определения трехмерной ориентации монокулярной камеры с использованием точек схождения перспективы, обнаруженных в последовательностях изображений.

2. Целью настоящей работы является апробация метода Хуттунена–Пише и проверка применимости подхода в условиях городской застройки, а также — при ориентации среди объектов живой природы.


3. Предложенный метод состоит из следующих основных шагов. 
Сначала производится поиск сегментов линий на изображении с использованием метода Рафаэля фон Джиои. 
Затем среди полученного набора СЛ выделяются три наибольших кластера, каждый из которых задает пучок прямых, сходящихся в одной точке. Данный этап проводится с использованием последовательного адаптивного алгоритма RANSAC.
На приведенном слайде показан пример подобного выделения сегментов линий с их последующей кластеризацией. Также внизу слева приведена формула оценки количества необходимых итераций алгоритма RANSAC, чтобы гарантировать с вероятностью p, что за k итераций будет найден искомый кластер с относительным числом внутренних (т.е. потенциально принадлежащих ему) сегментов линий r.
Внизу справа кратко приведен принцип оценки принадлежности сегментов кластеру на основе углового расстояния от сегмента до общей точке кластера с некоторым порогом допустимости эпсилон.

Точки, являющиеся пересечениями пучков прямых каждого из кластеров, называются точками схождения перспективы. И обычно их рассматривают в терминах проективной геометрии, т.к. проецирование трехмерной сцены на двухмерную плоскость изображения, которое осуществляет фото- или видеокамера, является проективным преобразованием. 
Точки схождения перспективы являются предельными точками линий под действием этого оператора.
На слайде приведен оператор проективного преобразования и формула, связывающая вектор направления прямой с ее точкой схождения перспективы.
Метод Хуттунена–Пише работает в предположении, что на изображениях можно выделить некоторый набор сегментов линий, соответствующих взаимно ортогональным направлениям. Эти направления естественным образом возникают на изображениях, сделанных внутри помещений и в условиях городской застройки.
Анализ координат точек схождения перспективы тройки взаимно ортогональных направлений позволяет определить углы ориентации камеры в системе координат этой тройки.

Выделенные на этапе алгоритма RANSAC кластеры дают грубые оценки ТСП. Затем эти оценки улучшаются путем решения переопределенной СЛАУ, которая задает связь между линиями кластера и точкой схождения перспективы, а именно, что все эти линии содержат данную точку. Однако данная СЛАУ сначала переводится в нормализованную систему координат изображения, то есть в систему координат камеры с фокусным расстоянием равным 1. Данное преобразование возможно в случае известной матрицы калибровки камеры. Для каждой из ТСП приближенно решается данная переопределенная СЛАУ. 

Полученные векторы направлений ТСП исследуются на взаимную ортогональность. Для получения углов ориентации камеры достаточно хотя бы двух правильно найденных взаимно ортогональных направлений ТСП, так как оставшееся третье направление может быть вычислено как векторное произведение двух имеющихся. Для дальнейшего определения ориентации камеры данная система требует дополнительной ортогонализации, которая осуществляется помощью сингулярного разложения матрицы, составленной из векторов направлений найденных ТСП [10].

Полученная ортонормированая система векторов задает матрицу поворота камеры, по которой можно вычислить ее углы ориентации. В качестве задания углов ориентации используются углы Эйлера в нотации (1, 2, 3), где числа обозначают индексы осей координат в произведении матриц поворота. По приведенным формулам вычисляются углы ориентации.

4. В рамках работы разработано тестовое приложение, которое состоит из следующих функциональных блоков:
    организация конфигурации запуска приложения и управления тестированием
    управление процессом обработки изображения
    управление процессом тестирования набора изображений
5. В рамках работы были решены вопросы технологического характера, связанные с использованием открытой библиотеки алгоритмов компьютерного зрения OpenCV, а также с конвертацией тестовых данных.

6. В качестве набора тестовых данных метода выбраны фотографии из базы изображений YorkUrbanDb, созданной на базе Йоркского университета города Торонто. Эта база содержит изображения, сделанные внутри помещения и в условиях городской застройки Торонто, имеются данные по векторам направлений ТСП на каждом из них.

8. В результате тестирования было обработано 45 снимков внутри помещений из коллекции базы данных YorkUrbanDB. Время и качество обработки всех снимков варьируется от запуска к запуску, поэтому для каждого из изображений было проведено по 20 запусков алгоритма и бралась усредненная оценка результата. Полученые данные приведены на слайде.
9.